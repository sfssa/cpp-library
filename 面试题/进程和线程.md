# 1.什么是进程？

标准定义：进程是一个具有一定独立功能的程序在一个数据集合上依次动态执行的过程。进程是一个正在执行程序的实例，包括程序计数器、寄存器和程序变量的当前值。

简单来说进程就是一个程序的执行流程，内部保存程序运行所需的资源。

在操作系统中，可以有多个进程在运行，但是对于CPU来说，同一时刻，一个CPU只能运行一个进程，但在某一时间段呢，CPU将这一时间段拆分成更短的时间片，CPU不停的在各个进程间游走，给人一种并行的错觉，像CPU可以同时运行多个进程一样，这就是伪并行。

# 2.进程和程序有什么联系？

一个进程是某种类型的一个活动，它有程序、输入、输出以及状态。单个处理器可以被若干进程共享，它使用某种调度算法决定何时停止一个进程的工作，并转而为另一个进程提供服务。

程序是产生进程的基础

程序的每次运行产生不同的进程

进程是程序功能的体现

通过多次执行，一个程序可对应多个进程；通过调用关系，一个进程可包括多个程序

# 3.进程和程序的区别是什么？

进程是动态的，程序是静态的：程序是有序代码的集合，进程是程序的执行；

进程是暂时的，程序是永久的：进程是一个状态变化的过程，程序可以长久保留；

进程和程序的组成不同：进程的组成包括程序、数据和进程控制块；

# 4.进程有什么特点？

动态性：可动态的创建和结束进程；

并发性：可以被独立的调度并占用处理机并发运行；

独立性：不同进程的工作互不影响；

制约性：因访问共享资源或进程间同步而产生制约；

# 5.进程如何创建？

触发进程创建的事件：

1. 系统初始化：启动操作系统会创建很多进程，有些是同用户交互并替他们完成工作的前台进程，其它都是后台进程，后台进程和特定用户没有关系，但也提供某些专门的功能，例如接收邮件，这种功能的进程也称为守护进程。计划任务是个典型的守护进程，每分钟运行一次来检查是否有工作需要它完成。如果有工作要做，就完成工作，然后进入休眠状态，直到下一次检查时刻的到来。
2. 正在运行的程序执行了系统调用：在一个进程中又创建了一个新的进程。
3. 用户请求创建一个新进程：电脑打开某个应用程序时，至少有一个进程被创建。
4. 一个批处理作业的初始化：不常见，仅在大型机的批处理系统中应用，用户在这种系统中提交批处理作业，在操作系统认为有资源可运行另一个作业时，创建一个新的进程，并运行其输入队列中的下一个作业。
5. 在UNIX及类UNIX系统中，通过fork系统调用可以创建新的进程：进程创建后父子进程各自有不同的地址空间，一个进程在其地址空间的修改对另一个进程不可见。子进程的初始化空间是父进程的一个副本，还有一个不可写的空间是共享的。还有一种写时复制技术，子进程共享父进程的所有内存，两者之一要修改部分内存，则这块内存被复制确保修改发生在当前进程的私有内存区域。（当子进程或父进程尝试修改这些共享内存页中的数据时，操作系统才会执行实际的复制操作）

# 6.进程为何终止？

正常退出（自愿）：进程完成了任务，UNIX中退出进程的系统调用是exit；

出错退出（自愿）：进程发现了错误而退出；

严重错误（非自愿）：进程发生了重大错误而不得不退出，例如执行了非法指令，引用不存在的内存，除数为0等；

被其他进程杀死（非自愿）：其他进程执行kill系统调用通知操作系统杀死某个进程；

# 7.操作系统如何进行进程管理？

操作系统为每个进程都维护一个PCB保存与该进程有关的各种状态信息，是进程存在的唯一标志，操作系统通过PCB来描述进程的基本情况以及运行变化的过程，进程的任何变化都会通过PCB来体现。

PCB包含进程状态的重要信息，包括程序计数器、堆栈指针、内存分配状况、所打开文件的状态、账号和调度信息，以及其他在进程由运行态转换到就绪态或阻塞态所必须保存的信息，从而保证进程随后能再次启动。

中断向量是指中断服务程序的入口地址，一个进程在执行过程中可能会被中断无数次，但是每次中断后，被中断的进程都要返回到与中断发生前完全相同的状态。

# 8.进程控制块中存储了什么信息？

进程标识信息：进程的标识、父进程的标识、用户标识；

处理机状态信息保护区：保存进程的运行现场信息

	· 用户可见寄存器：用户程序可以使用的数据，地址寄存器等；
	
	·控制和状态寄存器：程序计数器，程序状态字;
	
	·栈指针：过程调用、系统调用、中断处理和返回时需要用的；

进程控制信息

	·调度和状态信息：用于操作系统调度进程使用；
	
	·进程间通信信息：支持进程间与通信相关的各种标识、信号、信件等，存放在接收方进程控制块中；
	
	·存储管理信息：包含有指向本进程映像存储空间的数据结构；
	
	·进程所用资源：由进程打开的系统资源，例如打开的文件；
	
	·有关数据结构连接信息：进程可以连接到一个进程队列中，或链接到相关其他进程的PCB；

# 9.进程如何进行生命周期管理？

**进程创建**

		系统初始化；
	
		用户请求创建一个新进程；
	
		一个正在运行的进程执行创建进程的系统调用；

**进程运行**

		内核选择一个处于就绪态的进程，让他占用处理器运行；

**进程等待**

		请求并等待系统服务，无法马上完成；
	
		启动某种操作，无法马上完成；
	
		需要的数据没有到达；

进程只能阻塞自己，只有进程自身才知道何时需要等待某种事件的发生；

**进程唤醒**

		进程只能被别的进程或操作系统唤醒，唤醒的原因有：
	
		被阻塞进程需要的资源可被满足；
	
		被阻塞进程等待的事件到达；
	
		将该进程的PCB插入到就绪队列中；

**进程结束**

		自愿型正常退出；
	
		自愿型错误退出；
	
		强制型致命错误退出；
	
		强制型被其他进程杀死退出；

# 10.进程都包含什么？

**程序**

代码段，包含可执行程序的代码，是程序的实际逻辑部分，通常是二进制代码或可执行文件；

**数据**

数据段，存储全局变量和静态变量等数据，是一个进程的内存区域，保存程序的数据。

**进程控制块**

1. 内存空间信息：进程的地址空间分布，如代码段、数据段、堆栈等的起始位置和大小；
2. 寄存器上下文：进程在中断或切换出运行状态时的寄存器值，以便恢复执行；
3. 进程状态：进程当前的状态，如运行、就绪、阻塞；
4. 进程优先级：用于进程调度，确定进程在多任务系统中的执行顺序；
5. 父进程标识符：创建该进程的父进程；
6. 资源分配信息：已分配的内存，打开的文件描述符，网络连接等资源的使用情况；
7. 进程的运行时间信息：已经运行的时间，用于性能统计和时间片轮转等调度策略；
8. 进程所属的用户或权限信息：指示进程在操作系统的权限级别，用于安全控制；

# 11.线程都包含什么?

1. 线程ID：用于唯一标识线程的整数或句柄，线程ID在同一进程是唯一的；
2. 程序计数器：指令指针，存储当前线程正在执行的指令的地址；
3. 寄存器集合：通用寄存器，栈指针寄存器，存储线程的执行上下文；
4. 线程栈：存储线程的局部变量，函数调用信息和栈帧，每个线程有自己的栈；
5. 线程优先级：确定多线程环境中的执行顺序；
6. 线程状态：如运行、阻塞、就绪等；
7. 线程本地存储：存储线程私有数据；
8. 互斥锁、信号量等同步机制：用于线程之间的协调和同步，避免竞态条件和数据访问冲突；
9. 线程函数或入口点：县城开始执行的位置，通常是一个函数或方法；
10. 线程所属进程上下文：线程与所属进程共享进程的资源和地址空间；

# 12.进程和线程的区别和联系是什么？

**区别：**

1. **独立性：**
   - 进程是独立的执行单位，每个进程都有自己的地址空间、资源（如文件描述符、内存等）和状态。
   - 线程是进程内的执行单元，多个线程共享同一进程的地址空间和资源，因此它们更轻量级。
2. **创建和销毁开销：**
   - 创建和销毁进程通常比线程开销更大，因为进程需要独立的资源和地址空间。
   - 线程的创建和销毁相对较快，因为它们共享进程的资源。
3. **通信和同步：**
   - 进程之间的通信通常需要使用进程间通信（IPC）机制，如管道、消息队列、共享内存等，这些机制比较复杂。
   - 线程之间可以更容易地共享数据和通信，但需要注意线程同步，以避免竞态条件和数据访问冲突。
4. **故障隔离：**
   - 进程之间具有较好的隔离性，一个进程的崩溃通常不会影响其他进程。
   - 线程之间共享相同的进程地址空间，一个线程的错误可能会影响整个进程，导致进程崩溃。

**联系：**

1. **资源共享：**
   - 进程内的所有线程共享进程的资源，包括内存、文件句柄、全局变量等。
2. **并发执行：**
   - 进程内的多个线程可以并发执行，从而提高程序的性能和响应性。
3. **通信和同步：**
   - 进程内的线程可以使用线程间通信（如互斥锁、条件变量）来共享数据和协调操作。
4. **创建和销毁：**
   - 线程可以在进程内相对轻松地创建和销毁，而不需要重新创建整个进程。
5. **适用场景：**
   - 进程通常用于隔离不同任务或不同应用程序，而线程通常用于在同一应用程序内执行并发任务。